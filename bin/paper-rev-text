#!/usr/bin/env zsh


pushd "$PAPER_DIR/text"
dir="."
# If we don't have a revision, use current text
if [ -z "$1" ]; then
  now=1
  rev=HEAD
else
  now=0
  rev=$1
fi

function head() {
echo "# $@ {-}\n\n"
}

function text() {
  if [ $now = 1 ]; then
    cat $1
  else
    git --no-pager show $rev:$1
  fi
  echo "\n\n"
}

head "Project Summary"
text $dir/project-summary.md

head "Project Description"

text $dir/chapters/main.md

text $dir/figure-captions.md
head "References"
popd
